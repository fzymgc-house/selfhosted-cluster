# Ansible-lint configuration
# https://ansible.readthedocs.io/projects/lint/configuring/

profile: production

# Exclude paths from linting (relative to ansible/ directory)
exclude_paths:
  - .ansible_facts_cache/

# Skip specific rules
skip_list:
  - yaml[line-length]  # Handled by yamllint config
  - no-handler  # Many tasks intentionally use when: rather than handlers
  - role-name  # Role names use hyphens (tp2-bootstrap-node, teleport-agent)

# Warn only (don't fail) for these rules during transition
warn_list:
  - name[casing]  # Task name casing - fix over time
  - name[play]  # Unnamed plays - fix over time
  - fqcn[action-core]  # FQCN for builtin modules - fix over time
  - meta-incorrect  # Default role metadata - fix over time
  - internal-error  # Syntax checks fail due to vault password requirements
  - var-naming[no-role-prefix]  # Variable naming convention - fix over time

# Mock modules that may not be available in pre-commit environment
mock_modules:
  - community.hashi_vault.vault_read
  - community.hashi_vault.vault_write
  - community.general.timezone

# Mock roles if needed
mock_roles: []

# Enable offline mode to avoid galaxy downloads during pre-commit
offline: true

# Kinds mapping for file detection
kinds:
  - playbook: "*-playbook.yml"
  - playbook: "*-playbook.yaml"
  - tasks: "roles/**/tasks/**/*.yml"
  - tasks: "roles/**/tasks/**/*.yaml"
  - vars: "roles/**/vars/**/*.yml"
  - vars: "roles/**/defaults/**/*.yml"
  - handlers: "roles/**/handlers/**/*.yml"
  - meta: "roles/**/meta/main.yml"
