# SPDX-License-Identifier: MIT
# yaml-language-server: $schema=https://json.schemastore.org/kubernetes-configmap.json
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: cloudflared-config
  namespace: cloudflared
  labels:
    app.kubernetes.io/name: cloudflared
    app.kubernetes.io/component: tunnel-connector
data:
  config.yaml: |
    # Minimal config for remotely-managed tunnel
    # Ingress rules are managed in Cloudflare via Terraform
    # Tunnel ID must match the value in Vault secret: fzymgc-house/cluster/cloudflared/tunnels/fzymgc-house-main
    tunnel: c661c67f-b68f-4e5c-95da-c2ae788d8252
    credentials-file: /etc/cloudflared/creds/credentials.json
    metrics: 0.0.0.0:2000
    no-autoupdate: true
