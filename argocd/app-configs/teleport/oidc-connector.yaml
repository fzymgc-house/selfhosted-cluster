---
# OIDC Connector configuration for Teleport
# This configuration defines how Teleport integrates with Authentik for SSO
# The actual connector is applied via Helm values or tctl, not as a Kubernetes resource
apiVersion: v1
kind: ConfigMap
metadata:
  name: teleport-oidc-connector-config
  namespace: teleport
data:
  oidc-connector.yaml: |
    kind: oidc
    version: v3
    metadata:
      name: authentik
    spec:
      display: "Authentik SSO"
      redirect_url: "https://teleport.fzymgc.house/v1/webapi/oidc/callback"
      issuer_url: "https://auth.fzymgc.house/application/o/teleport/"
      claims_to_roles:
        - claim: groups
          value: "teleport-admins"
          roles:
            - admin
        - claim: groups
          value: "teleport-users"
          roles:
            - access
