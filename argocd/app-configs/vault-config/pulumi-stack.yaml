apiVersion: pulumi.com/v1
kind: Stack
metadata:
  name: vault-config
  namespace: vault
  labels:
    app.kubernetes.io/instance: vault-config
  annotations:
    argocd.argoproj.io/sync-wave: "-5"
    pulumi.com/reconciliation-request: "before-first-update"
    link.argocd.argoproj.io/external-link: http://app.pulumi.com/fzymgc-house/vault-config/dev
spec:
  serviceAccountName: vault-config
  stack: pulumi/stacks/vault-config
  projectRepo: "https://github.com/fzymgc-house/selfhosted-cluster.git"
  branch: main
  refresh: true
  resyncFrequencySeconds: 60
  destroyOnFinalize: true
  envRefs:
    PULUMI_ACCESS_TOKEN:
      type: Secret
      secret:
        name: pulumi-cloud-creds
        key: accessToken
  workspaceTemplate:
    spec:
      image: pulumi/pulumi:3.134.1-nonroot
      