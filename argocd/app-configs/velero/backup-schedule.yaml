apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: daily-backup
  namespace: velero
spec:
  schedule: "0 2 * * *"  # Daily at 2 AM
  template:
    includedNamespaces:
      - authentik
      - grafana
      - vault
      - valkey
      - postgres
      - metrics
    excludedNamespaces:
      - kube-system
      - flux-system
      - cert-manager
      - traefik
      - metallb-system
      - longhorn-system
      - velero
    includedResources:
      - deployments
      - statefulsets
      - services
      - configmaps
      - secrets
      - persistentvolumeclaims
      - persistentvolumes
    storageLocation: default
    ttl: 720h  # 30 days
---
apiVersion: velero.io/v1
kind: Schedule
metadata:
  name: weekly-full-backup
  namespace: velero
spec:
  schedule: "0 3 * * 0"  # Weekly on Sunday at 3 AM
  template:
    includedNamespaces:
      - authentik
      - grafana
      - vault
      - valkey
      - postgres
      - metrics
    excludedNamespaces:
      - kube-system
      - flux-system
      - cert-manager
      - traefik
      - metallb-system
      - longhorn-system
      - velero
    includedResources:
      - deployments
      - statefulsets
      - services
      - configmaps
      - secrets
      - persistentvolumeclaims
      - persistentvolumes
      - networkpolicies
      - ingressroutes
      - certificates
    storageLocation: default
    ttl: 2160h  # 90 days


