<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1200" height="650" viewBox="-0.5 -0.5 1200 650" style="background-color: white;">
  <defs/>
  <!-- Windmill Terraform Flow: Detailed Approval Process -->

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Helvetica" font-size="20" font-weight="bold" fill="#333">Windmill Terraform Flow</text>
  <text x="600" y="50" text-anchor="middle" font-family="Helvetica" font-size="12" fill="#666">Detailed approval workflow for infrastructure changes</text>

  <!-- Participant Headers -->
  <rect x="80" y="70" width="140" height="50" fill="#424242" stroke="#212121" stroke-width="2" rx="8"/>
  <text x="150" y="100" text-anchor="middle" font-family="Helvetica" font-size="13" font-weight="bold" fill="white">GitHub</text>

  <rect x="300" y="70" width="140" height="50" fill="#7B1FA2" stroke="#4A148C" stroke-width="2" rx="8"/>
  <text x="370" y="100" text-anchor="middle" font-family="Helvetica" font-size="13" font-weight="bold" fill="white">Windmill</text>

  <rect x="520" y="70" width="140" height="50" fill="#5865F2" stroke="#4752C4" stroke-width="2" rx="8"/>
  <text x="590" y="100" text-anchor="middle" font-family="Helvetica" font-size="13" font-weight="bold" fill="white">Discord</text>

  <rect x="740" y="70" width="140" height="50" fill="#FF6F00" stroke="#E65100" stroke-width="2" rx="8"/>
  <text x="810" y="100" text-anchor="middle" font-family="Helvetica" font-size="13" font-weight="bold" fill="white">Operator</text>

  <rect x="960" y="70" width="140" height="50" fill="#1976D2" stroke="#0D47A1" stroke-width="2" rx="8"/>
  <text x="1030" y="100" text-anchor="middle" font-family="Helvetica" font-size="13" font-weight="bold" fill="white">Cluster</text>

  <!-- Lifelines -->
  <line x1="150" y1="120" x2="150" y2="580" stroke="#424242" stroke-width="2" stroke-dasharray="8,4"/>
  <line x1="370" y1="120" x2="370" y2="580" stroke="#7B1FA2" stroke-width="2" stroke-dasharray="8,4"/>
  <line x1="590" y1="120" x2="590" y2="580" stroke="#5865F2" stroke-width="2" stroke-dasharray="8,4"/>
  <line x1="810" y1="120" x2="810" y2="580" stroke="#FF6F00" stroke-width="2" stroke-dasharray="8,4"/>
  <line x1="1030" y1="120" x2="1030" y2="580" stroke="#1976D2" stroke-width="2" stroke-dasharray="8,4"/>

  <!-- Step 1: PR Merged -->
  <rect x="90" y="150" width="120" height="35" fill="#E0E0E0" stroke="#424242" stroke-width="1.5" rx="5"/>
  <text x="150" y="172" text-anchor="middle" font-family="Helvetica" font-size="11" fill="#212121">PR Merged</text>

  <!-- Arrow: GitHub to Windmill (Webhook) -->
  <line x1="150" y1="185" x2="150" y2="200" stroke="#424242" stroke-width="1.5"/>
  <line x1="150" y1="200" x2="370" y2="200" stroke="#424242" stroke-width="1.5"/>
  <polygon points="370,200 360,195 360,205" fill="#424242"/>
  <text x="260" y="195" text-anchor="middle" font-family="Helvetica" font-size="10" fill="#666">webhook</text>

  <!-- Step 2: Terraform Plan -->
  <rect x="310" y="215" width="120" height="35" fill="#E1BEE7" stroke="#7B1FA2" stroke-width="1.5" rx="5"/>
  <text x="370" y="237" text-anchor="middle" font-family="Helvetica" font-size="11" fill="#4A148C">terraform plan</text>

  <!-- Arrow: Windmill to Discord (Notification) -->
  <line x1="370" y1="250" x2="370" y2="280" stroke="#7B1FA2" stroke-width="1.5"/>
  <line x1="370" y1="280" x2="590" y2="280" stroke="#7B1FA2" stroke-width="1.5"/>
  <polygon points="590,280 580,275 580,285" fill="#7B1FA2"/>
  <text x="480" y="275" text-anchor="middle" font-family="Helvetica" font-size="10" fill="#666">send notification</text>

  <!-- Step 3: Discord Message -->
  <rect x="505" y="295" width="170" height="100" fill="#E8EAF6" stroke="#5865F2" stroke-width="2" rx="5"/>
  <text x="590" y="315" text-anchor="middle" font-family="Helvetica" font-size="11" font-weight="bold" fill="#3949AB">Plan Summary + Buttons</text>

  <!-- Buttons -->
  <rect x="515" y="325" width="150" height="18" fill="#5865F2" stroke="#4752C4" rx="3"/>
  <text x="590" y="338" text-anchor="middle" font-family="Helvetica" font-size="9" fill="white">üîç Review &amp; Approve</text>

  <rect x="515" y="347" width="150" height="18" fill="#5865F2" stroke="#4752C4" rx="3"/>
  <text x="590" y="360" text-anchor="middle" font-family="Helvetica" font-size="9" fill="white">‚è© Quick Approve</text>

  <rect x="515" y="369" width="72" height="18" fill="#ED4245" stroke="#C93B3E" rx="3"/>
  <text x="551" y="382" text-anchor="middle" font-family="Helvetica" font-size="9" fill="white">‚ùå Reject</text>

  <rect x="593" y="369" width="72" height="18" fill="#5865F2" stroke="#4752C4" rx="3"/>
  <text x="629" y="382" text-anchor="middle" font-family="Helvetica" font-size="9" fill="white">üìã Details</text>

  <!-- Arrow: Discord to Operator (sees message) -->
  <line x1="675" y1="345" x2="810" y2="345" stroke="#5865F2" stroke-width="1.5"/>
  <polygon points="810,345 800,340 800,350" fill="#5865F2"/>
  <text x="742" y="340" text-anchor="middle" font-family="Helvetica" font-size="10" fill="#666">sees</text>

  <!-- Step 4: Operator reviews -->
  <rect x="750" y="360" width="120" height="35" fill="#FFE0B2" stroke="#FF6F00" stroke-width="1.5" rx="5"/>
  <text x="810" y="382" text-anchor="middle" font-family="Helvetica" font-size="11" fill="#E65100">Reviews Plan</text>

  <!-- Arrow: Operator clicks approval -->
  <line x1="810" y1="395" x2="810" y2="420" stroke="#FF6F00" stroke-width="1.5"/>
  <line x1="810" y1="420" x2="590" y2="420" stroke="#4CAF50" stroke-width="2"/>
  <polygon points="590,420 600,415 600,425" fill="#4CAF50"/>
  <text x="700" y="415" text-anchor="middle" font-family="Helvetica" font-size="10" fill="#2E7D32" font-weight="bold">clicks Approve</text>

  <!-- Arrow: Discord to Windmill (resume URL) -->
  <line x1="590" y1="420" x2="590" y2="440" stroke="#4CAF50" stroke-width="2"/>
  <line x1="590" y1="440" x2="370" y2="440" stroke="#4CAF50" stroke-width="2"/>
  <polygon points="370,440 380,435 380,445" fill="#4CAF50"/>
  <text x="480" y="455" text-anchor="middle" font-family="Helvetica" font-size="10" fill="#2E7D32">resume URL</text>

  <!-- Step 5: Terraform Apply -->
  <rect x="310" y="465" width="120" height="35" fill="#CE93D8" stroke="#7B1FA2" stroke-width="2" rx="5"/>
  <text x="370" y="487" text-anchor="middle" font-family="Helvetica" font-size="11" font-weight="bold" fill="#4A148C">terraform apply</text>

  <!-- Arrow: Windmill to Cluster -->
  <line x1="370" y1="500" x2="370" y2="515" stroke="#7B1FA2" stroke-width="1.5"/>
  <line x1="370" y1="515" x2="1030" y2="515" stroke="#1976D2" stroke-width="2"/>
  <polygon points="1030,515 1020,510 1020,520" fill="#1976D2"/>
  <text x="700" y="510" text-anchor="middle" font-family="Helvetica" font-size="10" fill="#0D47A1">applies changes</text>

  <!-- Step 6: Cluster updated -->
  <rect x="970" y="525" width="120" height="35" fill="#BBDEFB" stroke="#1976D2" stroke-width="1.5" rx="5"/>
  <text x="1030" y="547" text-anchor="middle" font-family="Helvetica" font-size="11" fill="#0D47A1">Resources Updated</text>

  <!-- Arrow: Windmill to Discord (status update) -->
  <line x1="370" y1="515" x2="370" y2="555" stroke="#7B1FA2" stroke-width="1.5"/>
  <line x1="370" y1="555" x2="590" y2="555" stroke="#7B1FA2" stroke-width="1.5"/>
  <polygon points="590,555 580,550 580,560" fill="#7B1FA2"/>
  <text x="480" y="550" text-anchor="middle" font-family="Helvetica" font-size="10" fill="#666">status update</text>

  <!-- Step 7: Discord success -->
  <rect x="530" y="565" width="120" height="30" fill="#C8E6C9" stroke="#388E3C" stroke-width="2" rx="5"/>
  <text x="590" y="585" text-anchor="middle" font-family="Helvetica" font-size="11" font-weight="bold" fill="#1B5E20">‚úÖ Success</text>

  <!-- Legend / Notes -->
  <rect x="80" y="600" width="400" height="40" fill="#FFF8E1" stroke="#FFB300" stroke-width="1" rx="5"/>
  <text x="95" y="618" font-family="Helvetica" font-size="10" font-weight="bold" fill="#FF6F00">Cloudflare Tunnel</text>
  <text x="95" y="632" font-family="Helvetica" font-size="9" fill="#333">Discord buttons use public URLs via windmill-wh.fzymgc.net</text>

  <rect x="500" y="600" width="400" height="40" fill="#FAFAFA" stroke="#E0E0E0" stroke-width="1" rx="5"/>
  <text x="515" y="618" font-family="Helvetica" font-size="10" font-weight="bold" fill="#333">Approval Options</text>
  <text x="515" y="632" font-family="Helvetica" font-size="9" fill="#333">Review &amp; Approve = Windmill UI | Quick Approve = Direct API | Reject = Cancel flow</text>
</svg>
